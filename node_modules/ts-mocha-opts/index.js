"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs");
const path = require("path");
const readline = require("readline");
const mergewith = require("lodash.mergewith");
function arrayConcat(objVal, srcVal) {
    if (objVal instanceof Array) {
        return Array.from(new Set(objVal.concat(srcVal)));
    }
    ;
}
;
const sep = path.sep;
const mochaOptsFileName = 'mocha.opts';
const tsConfigFileName = 'tsconfig.json';
const iniCWD = process.env.INIT_CWD;
const curDir = __dirname;
const packageFilePath = path.normalize(`${iniCWD}${sep}package.json`);
const tsConfigFilePath = path.normalize(`${iniCWD}${sep}${tsConfigFileName}`);
const mochaOptsFilePath = path.normalize(`${iniCWD}${sep}${mochaOptsFileName}`);
const mochaOptsTemplateFilePath = path.normalize(`${curDir}${sep}${mochaOptsFileName}`);
const npmScripts = {
    scripts: {
        test: `mocha --opts ./${mochaOptsFileName}`,
        "test-watch": `mocha  --opts ./${mochaOptsFileName} --watch --watch-extensions ts tsx`,
    }
};
const tsConfigAppend = {
    exclude: [
        "src/**/*.test.ts"
    ]
};
(() => __awaiter(this, void 0, void 0, function* () {
    const packageJSON = yield new Promise((resolve, reject) => {
        fs.readFile(packageFilePath, (err, packageJSON) => {
            if (err) {
                return reject(err);
            }
            ;
            resolve(JSON.parse(packageJSON.toString()));
        });
    });
    const tsConfig = yield new Promise((resolve, reject) => {
        fs.readFile(tsConfigFilePath, (err, tsConfig) => {
            if (err) {
                return resolve({});
            }
            ;
            resolve(JSON.parse(tsConfig.toString()));
        });
    });
    /*const hasMochaOpts = await new Promise<boolean>((resolve, reject)=>{
  
      fs.open(path.normalize(mochaOptsFilePath),'r',(err)=>{
  
        resolve(err === null);
  
      });
  
    });*/
    const curMochaOpts = yield new Promise((resolve, reject) => {
        const curMochaOpts = new Set();
        /* if(!hasMochaOpts){
     
           return resolve(curMochaOpts);
     
         };
     */
        let errorHandled = false;
        const handleError = (err) => {
            if (errorHandled) {
                return;
            }
            ;
            errorHandled = true;
            return curMochaOpts.size === 0 ? resolve(curMochaOpts) : reject(err);
        };
        const readable = fs.createReadStream(mochaOptsFilePath);
        readable.on('error', handleError);
        const rl = readline.createInterface({
            input: readable,
        });
        rl
            .on('line', (line) => curMochaOpts.add(line.trim()))
            .on('close', () => resolve(curMochaOpts))
            .on('error', handleError);
    });
    //Backup cur mochaOpts
    if (curMochaOpts.size > 0) {
        yield new Promise((resolve, reject) => {
            fs.copyFile(mochaOptsFilePath, path.normalize(`${iniCWD}${sep}.${mochaOptsFileName}.BAK`), (err) => err === null ? resolve() : reject(err));
        });
    }
    ;
    const mochaOptsTemplate = yield new Promise((resolve, reject) => {
        const mochaOptsTemplate = new Set();
        let errorHandled = false;
        const handleError = (err) => {
            if (errorHandled) {
                return;
            }
            ;
            errorHandled = true;
            return reject(err);
        };
        const readable = fs.createReadStream(mochaOptsTemplateFilePath);
        readable.on('error', handleError);
        const rl = readline.createInterface({
            input: readable,
        });
        rl
            .on('line', (line) => mochaOptsTemplate.add(line.trim()))
            .on('close', () => resolve(mochaOptsTemplate))
            .on('error', handleError);
    });
    //Merge mocha opts
    const newMochaOpts = new Set();
    const curMochaOptIter = curMochaOpts.values();
    let { value: curMochaOpt, done } = curMochaOptIter.next();
    for (const mochaOpt of mochaOptsTemplate) {
        if (!curMochaOpts.has(mochaOpt)) {
            newMochaOpts.add(mochaOpt);
        }
        ;
        if (!done) {
            newMochaOpts.add(curMochaOpt);
            let reuslt = curMochaOptIter.next();
            curMochaOpt = reuslt.value;
            done = reuslt.done;
        }
        ;
    }
    ;
    while (!done) {
        newMochaOpts.add(curMochaOpt);
        let reuslt = curMochaOptIter.next();
        curMochaOpt = reuslt.value;
        done = reuslt.done;
    }
    ;
    //update mochaopts
    yield new Promise((resolve, reject) => {
        fs.writeFile(mochaOptsFilePath, Array.from(newMochaOpts).join('\n'), (err) => err === null ? resolve() : reject(err));
    });
    //backup package.json
    yield new Promise((resolve, reject) => {
        fs.copyFile(packageFilePath, path.normalize(`${iniCWD}${sep}.package.json.BAK`), (err) => err === null ? resolve() : reject(err));
    });
    //Update package.json
    yield new Promise((resolve, reject) => {
        fs.writeFile(packageFilePath, JSON.stringify(mergewith(packageJSON, npmScripts, arrayConcat), null, 2), (err) => err === null ? resolve() : reject(err));
    });
    //backup tsconfig.json
    if (Object.keys(tsConfig).length > 0) {
        yield new Promise((resolve, reject) => {
            fs.copyFile(tsConfigFilePath, path.normalize(`${iniCWD}${sep}.tsconfig.json.BAK`), (err) => err === null ? resolve() : reject(err));
        });
    }
    ;
    //Update tsconfig.json
    yield new Promise((resolve, reject) => {
        fs.writeFile(tsConfigFilePath, JSON.stringify(mergewith(tsConfig, tsConfigAppend, arrayConcat), null, 2), (err) => err === null ? resolve() : reject(err));
    });
}))().catch((err) => console.error(err));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEseUJBQXlCO0FBQ3pCLDZCQUE2QjtBQUM3QixxQ0FBcUM7QUFDckMsOENBQThDO0FBRTlDLHFCQUFxQixNQUFNLEVBQUUsTUFBTTtJQUVqQyxJQUFJLE1BQU0sWUFBWSxLQUFLLEVBQUU7UUFFM0IsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBRW5EO0lBQUEsQ0FBQztBQUVKLENBQUM7QUFBQSxDQUFDO0FBRUYsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztBQUNyQixNQUFNLGlCQUFpQixHQUFHLFlBQVksQ0FBQztBQUN2QyxNQUFNLGdCQUFnQixHQUFHLGVBQWUsQ0FBQztBQUN6QyxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQztBQUNwQyxNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUM7QUFFekIsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxHQUFHLGNBQWMsQ0FBQyxDQUFDO0FBQ3RFLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUcsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDO0FBQzlFLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUcsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO0FBQ2hGLE1BQU0seUJBQXlCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUcsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO0FBRXhGLE1BQU0sVUFBVSxHQUFHO0lBQ2pC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